name: Digital Marketing Campaign ROI (Conservative Strategy)
category: Marketing
description: Risk-averse marketing approach with proven channels and realistic expectations
version: 1.0.0
tags: [marketing, digital-marketing, conservative, low-risk]

parameters:
  - key: annualRecurringRevenue
    label: Annual Recurring Revenue (ARR)
    type: number
    default: 1000000     # $1M ARR baseline
    min: 100000
    max: 50000000
    step: 50000
    description: Company's annual recurring revenue for budget planning
    
  - key: marketingBudgetPercent
    label: Marketing Budget (% of ARR)
    type: number
    default: 8           # Conservative 8% of ARR
    min: 2
    max: 25
    step: 0.5
    description: Conservative marketing spend as percentage of ARR

  - key: ppcBudgetPercent
    label: PPC Budget Allocation (%)
    type: number
    default: 50          # Focus on proven PPC channels
    min: 0
    max: 100
    step: 5
    description: Heavy focus on proven pay-per-click advertising

  - key: socialBudgetPercent
    label: Social Media Budget (%)
    type: number
    default: 20          # Limited social spend
    min: 0
    max: 100
    step: 5
    description: Conservative social media spend on established platforms

  - key: contentBudgetPercent
    label: Content Marketing Budget (%)
    type: number
    default: 20          # Steady content investment
    min: 0
    max: 100
    step: 5
    description: Consistent content marketing for long-term results

  - key: emailBudgetPercent
    label: Email Marketing Budget (%)
    type: number
    default: 10          # Standard email allocation
    min: 0
    max: 100
    step: 5
    description: Standard email marketing to existing audience

  - key: targetAudience
    label: Target Audience
    type: select
    default: b2c-general # Conservative: broad, proven market
    options: [b2c-general, b2c-niche, b2b-smb, b2b-enterprise, e-commerce]
    description: Broad, proven market with established demand

  - key: seasonality
    label: Campaign Seasonality
    type: select
    default: normal      # Conservative: avoid seasonal risks
    options: [off-season, normal, peak-season, holiday]
    description: Normal timing to avoid seasonal volatility

  - key: competitionLevel
    label: Market Competition
    type: select
    default: moderate    # Conservative: manageable competition
    options: [low, moderate, high, saturated]
    description: Moderate competition with established positioning

  - key: avgOrderValue
    label: Average Order Value
    type: number
    default: 120         # Conservative order value
    min: 10
    max: 10000
    step: 10
    description: Conservative estimate of customer purchase value

  - key: customerLifetimeValue
    label: Customer Lifetime Value
    type: number
    default: 350         # Conservative CLV
    min: 50
    max: 50000
    step: 50
    description: Conservative estimate of customer lifetime value

  - key: targetCACRatio
    label: Target CAC:CLV Ratio
    type: number
    default: 0.25        # Conservative 1:4 CAC to CLV ratio
    min: 0.1
    max: 0.8
    step: 0.05
    description: Target ratio of Customer Acquisition Cost to Customer Lifetime Value

  - key: organicConversionRate
    label: Organic Conversion Rate (%)
    type: number
    default: 15          # Conservative organic traffic conversion
    min: 5
    max: 40
    step: 1
    description: Percentage of conversions from organic/unpaid channels

groups:
  - name: Conservative Budget
    description: Risk-averse budget allocation based on ARR
    parameters: [annualRecurringRevenue, marketingBudgetPercent, ppcBudgetPercent, socialBudgetPercent, contentBudgetPercent, emailBudgetPercent]
    
  - name: Safe Market Positioning
    description: Low-risk market approach with proven audience
    parameters: [targetAudience, seasonality, competitionLevel]
    
  - name: Conservative Economics
    description: Realistic customer value and acquisition cost expectations
    parameters: [avgOrderValue, customerLifetimeValue, targetCACRatio, organicConversionRate]

outputs:
  - key: totalLeads
    label: Total Leads Generated
    description: Total number of qualified leads generated across all channels

  - key: totalConversions
    label: Total Conversions
    description: Total number of customers acquired from the campaign

  - key: costPerAcquisition
    label: Cost Per Acquisition
    description: Average cost to acquire each new customer

  - key: campaignROI
    label: Campaign ROI (%)
    description: Return on investment percentage for the entire campaign

  - key: lifetimeROI
    label: Lifetime Value ROI (%)
    description: ROI considering customer lifetime value

  - key: actualCAC
    label: Actual Customer Acquisition Cost
    description: Real CAC including all marketing and sales costs

  - key: cacToClvRatio
    label: Actual CAC:CLV Ratio
    description: Ratio of actual CAC to customer lifetime value

  - key: organicConversions
    label: Organic Conversions
    description: Number of conversions from organic channels

simulation:
  logic: |
    // Calculate total marketing budget from ARR
    const totalBudget = annualRecurringRevenue * (marketingBudgetPercent / 100)
    
    // Conservative budget validation
    const totalBudgetPercent = ppcBudgetPercent + socialBudgetPercent + 
                              contentBudgetPercent + emailBudgetPercent
    
    // Normalize if over 100%
    const normalizedPPC = totalBudgetPercent > 100 ? 
                         (ppcBudgetPercent / totalBudgetPercent) * 100 : ppcBudgetPercent
    const normalizedSocial = totalBudgetPercent > 100 ? 
                            (socialBudgetPercent / totalBudgetPercent) * 100 : socialBudgetPercent
    const normalizedContent = totalBudgetPercent > 100 ? 
                             (contentBudgetPercent / totalBudgetPercent) * 100 : contentBudgetPercent
    const normalizedEmail = totalBudgetPercent > 100 ? 
                           (emailBudgetPercent / totalBudgetPercent) * 100 : emailBudgetPercent
    
    // Calculate channel budgets
    const ppcBudget = totalBudget * normalizedPPC / 100
    const socialBudget = totalBudget * normalizedSocial / 100
    const contentBudget = totalBudget * normalizedContent / 100
    const emailBudget = totalBudget * normalizedEmail / 100
    
    // Conservative performance metrics by audience type
    const audienceMetrics = {
      'b2c-general': { cpcRange: [0.6, 1.8], conversionRate: 0.018 },  // Conservative ranges
      'b2c-niche': { cpcRange: [1.2, 3.5], conversionRate: 0.03 },
      'b2b-smb': { cpcRange: [2.5, 7.0], conversionRate: 0.012 },
      'b2b-enterprise': { cpcRange: [6.0, 22.0], conversionRate: 0.006 },
      'e-commerce': { cpcRange: [0.4, 1.3], conversionRate: 0.02 }
    }
    
    // Conservative seasonality multipliers
    const seasonalityMultipliers = {
      'off-season': 0.75,
      normal: 1.0,        // Conservative uses normal season
      'peak-season': 1.3,
      holiday: 1.6
    }
    
    // Conservative competition impact
    const competitionFactors = {
      low: 1.2,
      moderate: 1.0,      // Conservative uses moderate competition
      high: 0.85,
      saturated: 0.65
    }
    
    const metrics = audienceMetrics[targetAudience]
    const seasonMultiplier = seasonalityMultipliers[seasonality]
    const compMultiplier = competitionFactors[competitionLevel]
    
    // Conservative channel-specific performance modeling
    // PPC Performance - Conservative
    const ppcCPC = metrics.cpcRange[0] + random() * (metrics.cpcRange[1] - metrics.cpcRange[0])
    const ppcClicks = ppcBudget / ppcCPC
    const ppcConversionRate = metrics.conversionRate * 1.1 * seasonMultiplier * compMultiplier * (0.85 + random() * 0.25)  // Less variation
    const ppcConversions = ppcClicks * ppcConversionRate
    
    // Social Media Performance - Conservative
    const socialCPM = 6 + random() * 8  // Slightly higher CPM, less variation
    const socialImpressions = (socialBudget / socialCPM) * 1000
    const socialCTR = 0.008 + random() * 0.015  // Conservative CTR range
    const socialClicks = socialImpressions * socialCTR
    const socialConversionRate = metrics.conversionRate * 0.75 * seasonMultiplier * compMultiplier * (0.8 + random() * 0.4)
    const socialConversions = socialClicks * socialConversionRate
    
    // Content Marketing Performance - Conservative
    const contentLeadsPerDollar = 0.08 + random() * 0.12  // Conservative lead generation
    const contentLeads = contentBudget * contentLeadsPerDollar
    const contentConversionRate = metrics.conversionRate * 1.8 * compMultiplier * (0.85 + random() * 0.3)  // Less variation
    const contentConversions = contentLeads * contentConversionRate
    
    // Email Marketing Performance - Conservative
    const emailCostPerSend = 0.025 + random() * 0.025  // Conservative cost range
    const emailsSent = emailBudget / emailCostPerSend
    const emailOpenRate = 0.16 + random() * 0.12  // Conservative open rate
    const emailCTR = 0.018 + random() * 0.025  // Conservative CTR
    const emailClicks = emailsSent * emailOpenRate * emailCTR
    const emailConversionRate = metrics.conversionRate * 1.3 * (0.9 + random() * 0.15)  // Conservative conversion
    const emailConversions = emailClicks * emailConversionRate
    
    // Conservative aggregation with organic conversions
    const totalLeads = round(ppcClicks + socialClicks + contentLeads + emailClicks)
    const paidConversions = round(ppcConversions + socialConversions + contentConversions + emailConversions)
    
    // Calculate organic conversions (conservative estimate)
    const organicConversions = round(paidConversions * (organicConversionRate / 100) / (1 - organicConversionRate / 100))
    const totalConversions = paidConversions + organicConversions
    
    // CAC calculations (only paid channels contribute to CAC)
    const costPerAcquisition = paidConversions > 0 ? totalBudget / paidConversions : 0
    
    // Conservative CAC includes additional sales costs (20% of marketing budget)
    const salesCosts = totalBudget * 0.2  
    const actualCAC = paidConversions > 0 ? (totalBudget + salesCosts) / paidConversions : 0
    const cacToClvRatio = actualCAC > 0 ? actualCAC / customerLifetimeValue : 0
    
    // ROI calculations based on total conversions (paid + organic)
    const immediateRevenue = totalConversions * avgOrderValue
    const lifetimeRevenue = totalConversions * customerLifetimeValue
    
    const campaignROI = totalBudget > 0 ? ((immediateRevenue - totalBudget) / totalBudget) * 100 : 0
    const lifetimeROI = totalBudget > 0 ? ((lifetimeRevenue - totalBudget) / totalBudget) * 100 : 0
    
    return {
      totalLeads: totalLeads,
      totalConversions: totalConversions,
      costPerAcquisition: round(costPerAcquisition * 100) / 100,
      campaignROI: round(campaignROI * 10) / 10,
      lifetimeROI: round(lifetimeROI * 10) / 10,
      actualCAC: round(actualCAC * 100) / 100,
      cacToClvRatio: round(cacToClvRatio * 1000) / 1000,
      organicConversions: organicConversions
    }