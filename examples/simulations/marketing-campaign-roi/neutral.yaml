name: Digital Marketing Campaign ROI (Neutral Strategy)
category: Marketing
description: Balanced marketing approach with standard industry expectations and mixed channel strategy
version: 1.0.0
tags: [marketing, digital-marketing, neutral, balanced]

parameters:
  - key: annualRecurringRevenue
    label: Annual Recurring Revenue (ARR)
    type: number
    default: 2000000     # $2M ARR baseline
    min: 100000
    max: 50000000
    step: 50000
    description: Company's annual recurring revenue for budget planning
    
  - key: marketingBudgetPercent
    label: Marketing Budget (% of ARR)
    type: number
    default: 12          # Standard 12% of ARR
    min: 2
    max: 25
    step: 0.5
    description: Standard marketing spend as percentage of ARR

  - key: ppcBudgetPercent
    label: PPC Budget Allocation (%)
    type: number
    default: 40          # Balanced PPC allocation
    min: 0
    max: 100
    step: 5
    description: Balanced pay-per-click advertising investment

  - key: socialBudgetPercent
    label: Social Media Budget (%)
    type: number
    default: 30          # Standard social spend
    min: 0
    max: 100
    step: 5
    description: Standard social media advertising across platforms

  - key: contentBudgetPercent
    label: Content Marketing Budget (%)
    type: number
    default: 20          # Moderate content investment
    min: 0
    max: 100
    step: 5
    description: Moderate content marketing for brand building

  - key: emailBudgetPercent
    label: Email Marketing Budget (%)
    type: number
    default: 10          # Standard email allocation
    min: 0
    max: 100
    step: 5
    description: Standard email marketing to nurture leads

  - key: targetAudience
    label: Target Audience
    type: select
    default: b2c-general # Neutral: broad general market
    options: [b2c-general, b2c-niche, b2b-smb, b2b-enterprise, e-commerce]
    description: General consumer market with standard targeting

  - key: seasonality
    label: Campaign Seasonality
    type: select
    default: normal      # Neutral timing
    options: [off-season, normal, peak-season, holiday]
    description: Standard timing without seasonal optimization

  - key: competitionLevel
    label: Market Competition
    type: select
    default: moderate    # Standard competition level
    options: [low, moderate, high, saturated]
    description: Typical market competition with standard challenges

  - key: avgOrderValue
    label: Average Order Value
    type: number
    default: 150         # Standard order value
    min: 10
    max: 10000
    step: 10
    description: Standard customer purchase value expectations

  - key: customerLifetimeValue
    label: Customer Lifetime Value
    type: number
    default: 450         # Standard CLV
    min: 50
    max: 50000
    step: 50
    description: Standard customer lifetime value expectations

  - key: targetCACRatio
    label: Target CAC:CLV Ratio
    type: number
    default: 0.30        # Standard 1:3.3 CAC to CLV ratio
    min: 0.1
    max: 0.8
    step: 0.05
    description: Target ratio of Customer Acquisition Cost to Customer Lifetime Value

  - key: organicConversionRate
    label: Organic Conversion Rate (%)
    type: number
    default: 20          # Standard organic traffic conversion
    min: 5
    max: 40
    step: 1
    description: Percentage of conversions from organic/unpaid channels

groups:
  - name: Balanced Budget
    description: Standard budget distribution based on ARR
    parameters: [annualRecurringRevenue, marketingBudgetPercent, ppcBudgetPercent, socialBudgetPercent, contentBudgetPercent, emailBudgetPercent]
    
  - name: Standard Market Approach
    description: Typical market conditions and targeting strategy
    parameters: [targetAudience, seasonality, competitionLevel]
    
  - name: Standard Economics
    description: Industry-standard customer value and acquisition cost metrics
    parameters: [avgOrderValue, customerLifetimeValue, targetCACRatio, organicConversionRate]

outputs:
  - key: totalLeads
    label: Total Leads Generated
    description: Total number of qualified leads generated across all channels

  - key: totalConversions
    label: Total Conversions
    description: Total number of customers acquired from the campaign

  - key: costPerAcquisition
    label: Cost Per Acquisition
    description: Average cost to acquire each new customer

  - key: campaignROI
    label: Campaign ROI (%)
    description: Return on investment percentage for the entire campaign

  - key: lifetimeROI
    label: Lifetime Value ROI (%)
    description: ROI considering customer lifetime value

  - key: actualCAC
    label: Actual Customer Acquisition Cost
    description: Real CAC including all marketing and sales costs

  - key: cacToClvRatio
    label: Actual CAC:CLV Ratio
    description: Ratio of actual CAC to customer lifetime value

  - key: organicConversions
    label: Organic Conversions
    description: Number of conversions from organic channels

simulation:
  logic: |
    // Calculate total marketing budget from ARR
    const totalBudget = annualRecurringRevenue * (marketingBudgetPercent / 100)
    
    // Standard budget validation
    const totalBudgetPercent = ppcBudgetPercent + socialBudgetPercent + 
                              contentBudgetPercent + emailBudgetPercent
    
    // Normalize if over 100%
    const normalizedPPC = totalBudgetPercent > 100 ? 
                         (ppcBudgetPercent / totalBudgetPercent) * 100 : ppcBudgetPercent
    const normalizedSocial = totalBudgetPercent > 100 ? 
                            (socialBudgetPercent / totalBudgetPercent) * 100 : socialBudgetPercent
    const normalizedContent = totalBudgetPercent > 100 ? 
                             (contentBudgetPercent / totalBudgetPercent) * 100 : contentBudgetPercent
    const normalizedEmail = totalBudgetPercent > 100 ? 
                           (emailBudgetPercent / totalBudgetPercent) * 100 : emailBudgetPercent
    
    // Calculate channel budgets
    const ppcBudget = totalBudget * normalizedPPC / 100
    const socialBudget = totalBudget * normalizedSocial / 100
    const contentBudget = totalBudget * normalizedContent / 100
    const emailBudget = totalBudget * normalizedEmail / 100
    
    // Standard performance metrics by audience type (same as base)
    const audienceMetrics = {
      'b2c-general': { cpcRange: [0.5, 2.0], conversionRate: 0.02 },
      'b2c-niche': { cpcRange: [1.0, 4.0], conversionRate: 0.035 },
      'b2b-smb': { cpcRange: [2.0, 8.0], conversionRate: 0.015 },
      'b2b-enterprise': { cpcRange: [5.0, 25.0], conversionRate: 0.008 },
      'e-commerce': { cpcRange: [0.3, 1.5], conversionRate: 0.025 }
    }
    
    // Standard seasonality multipliers (same as base)
    const seasonalityMultipliers = {
      'off-season': 0.7,
      normal: 1.0,        // Neutral uses normal season
      'peak-season': 1.4,
      holiday: 1.8
    }
    
    // Standard competition impact (same as base)
    const competitionFactors = {
      low: 1.3,
      moderate: 1.0,      // Neutral uses moderate competition
      high: 0.8,
      saturated: 0.6
    }
    
    const metrics = audienceMetrics[targetAudience]
    const seasonMultiplier = seasonalityMultipliers[seasonality]
    const compMultiplier = competitionFactors[competitionLevel]
    
    // Standard channel-specific performance modeling (same as base)
    // PPC Performance
    const ppcCPC = metrics.cpcRange[0] + random() * (metrics.cpcRange[1] - metrics.cpcRange[0])
    const ppcClicks = ppcBudget / ppcCPC
    const ppcConversionRate = metrics.conversionRate * 1.2 * seasonMultiplier * compMultiplier * (0.8 + random() * 0.4)
    const ppcConversions = ppcClicks * ppcConversionRate
    
    // Social Media Performance
    const socialCPM = 5 + random() * 10  // Cost per 1000 impressions
    const socialImpressions = (socialBudget / socialCPM) * 1000
    const socialCTR = 0.01 + random() * 0.02  // 1-3% CTR
    const socialClicks = socialImpressions * socialCTR
    const socialConversionRate = metrics.conversionRate * 0.8 * seasonMultiplier * compMultiplier * (0.7 + random() * 0.6)
    const socialConversions = socialClicks * socialConversionRate
    
    // Content Marketing Performance
    const contentLeadsPerDollar = 0.1 + random() * 0.15  // Leads per dollar spent
    const contentLeads = contentBudget * contentLeadsPerDollar
    const contentConversionRate = metrics.conversionRate * 2.0 * compMultiplier * (0.8 + random() * 0.4)
    const contentConversions = contentLeads * contentConversionRate
    
    // Email Marketing Performance
    const emailCostPerSend = 0.02 + random() * 0.03
    const emailsSent = emailBudget / emailCostPerSend
    const emailOpenRate = 0.15 + random() * 0.15  // 15-30% open rate
    const emailCTR = 0.02 + random() * 0.03  // 2-5% CTR
    const emailClicks = emailsSent * emailOpenRate * emailCTR
    const emailConversionRate = metrics.conversionRate * 1.5 * (0.9 + random() * 0.2)
    const emailConversions = emailClicks * emailConversionRate
    
    // Standard aggregation with organic conversions
    const totalLeads = round(ppcClicks + socialClicks + contentLeads + emailClicks)
    const paidConversions = round(ppcConversions + socialConversions + contentConversions + emailConversions)
    
    // Calculate organic conversions (standard estimate)
    const organicConversions = round(paidConversions * (organicConversionRate / 100) / (1 - organicConversionRate / 100))
    const totalConversions = paidConversions + organicConversions
    
    // CAC calculations (only paid channels contribute to CAC)
    const costPerAcquisition = paidConversions > 0 ? totalBudget / paidConversions : 0
    
    // Standard CAC includes additional sales costs (25% of marketing budget)
    const salesCosts = totalBudget * 0.25  
    const actualCAC = paidConversions > 0 ? (totalBudget + salesCosts) / paidConversions : 0
    const cacToClvRatio = actualCAC > 0 ? actualCAC / customerLifetimeValue : 0
    
    // ROI calculations based on total conversions (paid + organic)
    const immediateRevenue = totalConversions * avgOrderValue
    const lifetimeRevenue = totalConversions * customerLifetimeValue
    
    const campaignROI = totalBudget > 0 ? ((immediateRevenue - totalBudget) / totalBudget) * 100 : 0
    const lifetimeROI = totalBudget > 0 ? ((lifetimeRevenue - totalBudget) / totalBudget) * 100 : 0
    
    return {
      totalLeads: totalLeads,
      totalConversions: totalConversions,
      costPerAcquisition: round(costPerAcquisition * 100) / 100,
      campaignROI: round(campaignROI * 10) / 10,
      lifetimeROI: round(lifetimeROI * 10) / 10,
      actualCAC: round(actualCAC * 100) / 100,
      cacToClvRatio: round(cacToClvRatio * 1000) / 1000,
      organicConversions: organicConversions
    }