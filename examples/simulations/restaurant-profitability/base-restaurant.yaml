name: Restaurant Profitability Analysis (Base)
category: Business
description: Base restaurant profitability simulation with industry-standard parameters and KPIs
version: 1.0.0
tags: [restaurant, business-planning, base, industry-kpis]

parameters:
  - key: annualRecurringRevenue
    label: Annual Recurring Revenue (ARR)
    type: number
    default: 2000000     # $2M ARR baseline for restaurant investment
    min: 100000
    max: 50000000
    step: 50000
    description: Company's annual recurring revenue for restaurant investment planning
    
  - key: restaurantInvestmentPercent
    label: Restaurant Investment (% of ARR)
    type: number
    default: 12          # Standard 12% of ARR for restaurant investment
    min: 5
    max: 25
    step: 0.5
    description: Restaurant investment budget as percentage of ARR
    
  - key: startupCostsPercent
    label: Startup Costs (% of Restaurant Budget)
    type: number
    default: 75          # 75% of restaurant budget for initial investment
    min: 50
    max: 90
    step: 5
    description: Percentage of restaurant budget allocated to startup costs

  - key: monthlyRentPercent
    label: Monthly Rent (% of Restaurant Budget)
    type: number
    default: 5           # 5% of monthly restaurant budget for rent
    min: 2
    max: 15
    step: 0.5
    description: Monthly rent as percentage of monthly restaurant budget

  - key: seatingCapacity
    label: Seating Capacity
    type: number
    default: 80
    min: 20
    max: 300
    step: 5
    description: Total seating capacity of the restaurant

  - key: averageTicket
    label: Average Ticket Size
    type: number
    default: 45.00
    min: 10.00
    max: 200.00
    step: 1.00
    description: Average customer spend per visit

  - key: staffCount
    label: Staff Count
    type: number
    default: 12
    min: 3
    max: 50
    step: 1
    description: Total number of restaurant staff

  - key: avgWage
    label: Average Hourly Wage
    type: number
    default: 18.50
    min: 12.00
    max: 35.00
    step: 0.50
    description: Average hourly wage for restaurant staff

  - key: cuisineType
    label: Cuisine Type
    type: select
    default: casual-dining
    options: [fast-casual, casual-dining, fine-dining, ethnic-specialty]
    description: Type of cuisine and service model

  - key: locationQuality
    label: Location Quality
    type: select
    default: good
    options: [poor, fair, good, excellent, prime]
    description: Quality of restaurant location for foot traffic

  - key: hasDelivery
    label: Offers Delivery Service
    type: boolean
    default: true
    description: Whether restaurant offers delivery service

  - key: targetFoodCostPercent
    label: Target Food Cost (% of Revenue)
    type: number
    default: 30
    min: 20
    max: 40
    step: 1
    description: Target food cost management as percentage of revenue

  - key: customerAcquisitionPercent
    label: Customer Acquisition (% of Restaurant Budget)
    type: number
    default: 2           # 2% of monthly restaurant budget for customer acquisition
    min: 0.5
    max: 8
    step: 0.25
    description: Customer acquisition budget as percentage of monthly restaurant budget

  - key: tableTurnoverTarget
    label: Target Table Turns per Day
    type: number
    default: 2.5
    min: 1.0
    max: 5.0
    step: 0.1
    description: Target table turnover rate per day

  - key: seasonalVariation
    label: Seasonal Revenue Variation (%)
    type: number
    default: 20
    min: 5
    max: 40
    step: 5
    description: Expected seasonal variation in revenue

groups:
  - name: ARR-Based Investment
    description: Restaurant investment budget based on company ARR
    parameters: [annualRecurringRevenue, restaurantInvestmentPercent, startupCostsPercent, monthlyRentPercent]
    
  - name: Operations & Staffing
    description: Restaurant capacity, service model, and staffing costs
    parameters: [seatingCapacity, averageTicket, cuisineType, hasDelivery, staffCount, avgWage]
    
  - name: Market Strategy & Targets
    description: Location strategy, operational targets, and customer acquisition
    parameters: [locationQuality, targetFoodCostPercent, customerAcquisitionPercent, tableTurnoverTarget, seasonalVariation]

outputs:
  - key: monthlyRevenue
    label: Monthly Revenue
    description: Gross monthly revenue from all sources

  - key: monthlyOperatingCosts
    label: Monthly Operating Costs
    description: Total monthly expenses excluding startup costs

  - key: monthlyNetProfit
    label: Monthly Net Profit
    description: Monthly profit after all operating expenses

  - key: breakEvenMonths
    label: Break-even Period
    description: Number of months to recover initial startup investment

  - key: annualROI
    label: Annual ROI Percentage
    description: Return on investment percentage based on first year performance

  - key: actualFoodCostPercent
    label: Actual Food Cost (% of Revenue)
    description: Actual food cost percentage achieved vs target

  - key: customerAcquisitionCost
    label: Customer Acquisition Cost
    description: Cost to acquire each new customer through marketing

  - key: averageTableTurns
    label: Average Daily Table Turns
    description: Actual table turnover rate achieved

  - key: revenuePerSeat
    label: Revenue per Seat per Month
    description: Monthly revenue generated per available seat

  - key: laborCostPercent
    label: Labor Cost (% of Revenue)
    description: Labor costs as percentage of total revenue

simulation:
  logic: |
    // Calculate ARR-based restaurant budget
    const totalRestaurantBudget = annualRecurringRevenue * (restaurantInvestmentPercent / 100)
    const startupCosts = totalRestaurantBudget * (startupCostsPercent / 100)
    const monthlyRestaurantBudget = totalRestaurantBudget / 12
    const monthlyRent = monthlyRestaurantBudget * (monthlyRentPercent / 100)
    const customerAcquisitionBudget = monthlyRestaurantBudget * (customerAcquisitionPercent / 100)
    
    // Location quality factors
    const locationMultipliers = {
      poor: 0.6,
      fair: 0.8,
      good: 1.0,
      excellent: 1.3,
      prime: 1.6
    }
    
    // Cuisine type factors
    const cuisineFactors = {
      'fast-casual': { frequency: 1.4, ticketVariation: 0.8 },
      'casual-dining': { frequency: 1.0, ticketVariation: 1.0 },
      'fine-dining': { frequency: 0.6, ticketVariation: 1.5 },
      'ethnic-specialty': { frequency: 0.9, ticketVariation: 1.1 }
    }
    
    // Base utilization with seasonal variation
    const seasonalFactor = 1.0 + (random() - 0.5) * (seasonalVariation / 100)
    const baseUtilization = (0.35 + random() * 0.25) * seasonalFactor  // 35-60% with seasonal impact
    const locationFactor = locationMultipliers[locationQuality]
    const cuisineFactor = cuisineFactors[cuisineType]
    
    // Calculate actual table turns
    const actualTableTurns = tableTurnoverTarget * (0.85 + random() * 0.30)  // 85-115% of target
    
    // Calculate daily customers
    const actualUtilization = min(baseUtilization * locationFactor * cuisineFactor.frequency, 0.95)
    const dailyCustomers = seatingCapacity * actualUtilization * actualTableTurns
    
    // Revenue calculations
    const actualTicket = averageTicket * (0.8 + random() * 0.4) * cuisineFactor.ticketVariation
    const dineInRevenue = dailyCustomers * actualTicket * 30  // Monthly
    
    // Delivery revenue
    let deliveryRevenue = 0
    if (hasDelivery) {
      const deliveryCustomers = dailyCustomers * 0.25 * (0.8 + random() * 0.4)  // 25% delivery uptake
      deliveryRevenue = deliveryCustomers * actualTicket * 0.85 * 30  // 15% delivery fee impact
    }
    
    const monthlyRevenue = dineInRevenue + deliveryRevenue
    
    // Operating cost calculations with target-based food costs
    const laborCosts = staffCount * avgWage * 40 * 4.33  // Monthly labor
    
    // Food costs with target management
    const targetFoodCostVariation = (targetFoodCostPercent / 100) * (0.90 + random() * 0.20)  // 90-110% of target
    const foodCosts = monthlyRevenue * targetFoodCostVariation
    
    const utilitiesInsurance = 3500 + random() * 1500  // Utilities and insurance
    
    // Marketing costs from ARR-based budget plus revenue-based
    const totalMarketingCosts = customerAcquisitionBudget + (monthlyRevenue * 0.01)  // ARR-based + variable marketing
    
    const maintenanceRepairs = 1200 + random() * 800  // Maintenance costs
    const miscOperating = 2000 + random() * 1000  // Miscellaneous costs
    
    const monthlyOperatingCosts = monthlyRent + laborCosts + foodCosts + 
                                 utilitiesInsurance + totalMarketingCosts + 
                                 maintenanceRepairs + miscOperating
    
    // Profit calculations
    const monthlyNetProfit = monthlyRevenue - monthlyOperatingCosts
    
    // Break-even and ROI calculations
    const breakEvenMonths = monthlyNetProfit > 0 ? 
                           startupCosts / monthlyNetProfit : 999
    
    const annualNetProfit = monthlyNetProfit * 12
    const annualROI = (annualNetProfit / startupCosts) * 100
    
    // Calculate restaurant industry KPIs
    const actualFoodCostPercent = monthlyRevenue > 0 ? (foodCosts / monthlyRevenue) * 100 : 0
    const customerAcquisitionCost = dailyCustomers > 0 ? (totalMarketingCosts / (dailyCustomers * 30)) : 0
    const revenuePerSeat = seatingCapacity > 0 ? monthlyRevenue / seatingCapacity : 0
    const laborCostPercent = monthlyRevenue > 0 ? (laborCosts / monthlyRevenue) * 100 : 0
    
    return {
      monthlyRevenue: round(monthlyRevenue),
      monthlyOperatingCosts: round(monthlyOperatingCosts),
      monthlyNetProfit: round(monthlyNetProfit),
      breakEvenMonths: min(round(breakEvenMonths * 10) / 10, 999),
      annualROI: round(annualROI * 10) / 10,
      actualFoodCostPercent: round(actualFoodCostPercent * 10) / 10,
      customerAcquisitionCost: round(customerAcquisitionCost * 100) / 100,
      averageTableTurns: round(actualTableTurns * 10) / 10,
      revenuePerSeat: round(revenuePerSeat),
      laborCostPercent: round(laborCostPercent * 10) / 10
    }